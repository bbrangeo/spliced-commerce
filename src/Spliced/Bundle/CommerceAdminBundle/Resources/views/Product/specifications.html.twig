{% macro product_specification_prototype(prototype) %}
	{% form_theme prototype "SplicedCommerceAdminBundle:Form:bootstrap_form_row_labeless.html.twig" %}
    {% spaceless %}
        <tr class="main-body specification-{{ prototype.vars.data.id is defined and prototype.vars.data.id|length ? prototype.vars.data.id : '__name__' }}">
    	    <td>{{ form_row(prototype.option,{ 'attr' : { 'data-group' : 'option'} }) }}</td>
    	    <td>{{ form_row(prototype.values,{ 'attr' : { 'data-group' : 'values'} }) }}</td>
    	    <td>
                <a href="javascript:void(0);" class="delete-product-specification" title="Delete Specification">
    		        <i class="icon icon-trash"></i>
    		    </a>
    		    
    	    </td>
    	</tr> 
    {% endspaceless %}
{% endmacro %}

{% macro product_specification(form, product) %}
	{% form_theme form "SplicedCommerceAdminBundle:Form:bootstrap_form_row_labeless.html.twig" %}
    {% spaceless %}
        <tr class="main-body product-specification-{{ form.vars.data.id }}">
    	    <td>
    	        {{ form.vars.data.option.name }} ({{ form.vars.data.option.key }})
    	        {% if form.vars.data.option.description|length %}
    	            <div><small>{{ form.vars.data.option.description }}</small></div>
    	        {% endif %}
    	    </td>
    	    <td>
    	        {% if form.values is defined %}
    	            {{  form_row(form.values,{ 'attr' : { 'data-group' : 'values'} }) }}
    	        {% else %}
    	            <div><small>This specification type collects user input and does not have any values to select.</small></div>
    	        {% endif %}
    	    </td>
    	    <td>
                <a href="{{ path('commerce_admin_product_specification_delete', {'productId' : product.id, 'specificationId' : form.vars.data.id }) }}" class="delete-product-specification" title="Delete Specification">
    		        <i class="icon icon-trash"></i>
    		    </a>
    		    
    		    {{ form_widget(form.optionKey) }} 
    	    </td>
    	</tr> 
    {% endspaceless %}
{% endmacro %}

{% import _self as renderHelper %}

<table class="table table-striped table-bordered table-condensed product-specifications-table">
    <thead>
	    <tr>
	        <th>Specification</th>
	        <th>Value(s)</th>
	        <th></th>
	    </tr>
    </thead>
    <tfoot>
        <tr>
			<th colspan="3" class="text-right">
			    <a class="btn btn-primary btn-sm add-product-specification" href="javascript:void(0);" data-prototype="{{ renderHelper.product_specification_prototype(form.specifications.vars.prototype)|e }}" title="Add Specification"><i class="icon icon-plus"></i> Add Specification</a>
			</th>
        </tr>
    </tfoot>
    <tbody>
        {% if form.specifications|length %}
            {% for existingSpecification in form.specifications %}
                {{ renderHelper.product_specification(existingSpecification, form.vars.data) }}
            {% endfor %}
        {% endif %}
	    <tr class="no-results {{ form.specifications|length ? 'hide' : '' }}">
	        <td class="text-center" colspan="3">
	            <strong>No Specifications Currently Set</strong>
	        </td>
	    </tr>
    </tbody>
</table>